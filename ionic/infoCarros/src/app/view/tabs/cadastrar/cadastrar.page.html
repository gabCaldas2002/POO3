<ion-header>
  <ion-toolbar>
    <ion-title>
      Cadastrar um carro
    </ion-title>
    <ion-buttons tab="home">
      <ion-back-button defaultHref=""></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div *ngIf="isLoading">
    <ion-skeleton-text animated style="height: 100vh;"></ion-skeleton-text>
  </div>

  <ion-list>
    <form [formGroup]="formCadastrar" (ngSubmit)="submitForm()">
    <ion-item>
      <ion-input label="Modelo" placeholder="Insira o modelo" formControlName="modelo"></ion-input>
    </ion-item>
    <span *ngIf="formCadastrar.get('modelo')?.touched && formCadastrar.get('modelo')?.errors?.['required']">Modelo é Obrigatório!</span>
    <span *ngIf="formCadastrar.get('modelo')?.touched && formCadastrar.get('modelo')?.hasError('maxLength')">O modelo deve conter no máximo 35 caracteres</span>
    <ion-item>
      <ion-input label="Marca" placeholder="Insira a marca" formControlName="marca"></ion-input>
    </ion-item>
    <span *ngIf="formCadastrar.get('marca')?.touched && formCadastrar.get('marca')?.errors?.['required']">Marca é Obrigatória!</span>
    <span *ngIf="formCadastrar.get('marca')?.touched && formCadastrar.get('marca')?.hasError('maxLength')">A marca deve conter no máximo 20 caracteres</span>
    <ion-item>
      <ion-input label="Cor" placeholder="Insira a cor" formControlName="cor"></ion-input>
    </ion-item>
    <span *ngIf="formCadastrar.get('cor')?.touched && formCadastrar.get('cor')?.errors?.['required']">Cor é Obrigatória!</span>
    <ion-item>
      <ion-input label="Ano" placeholder="Insira o ano" formControlName="ano" type="number"></ion-input>
    </ion-item>
    <span *ngIf="formCadastrar.get('ano')?.touched && formCadastrar.get('ano')?.errors?.['required']">Ano é Obrigatório!</span>
    <span *ngIf="formCadastrar.get('ano')?.touched && formCadastrar.get('ano')?.hasError('min')">Insira um ano válido!</span>
    <span *ngIf="formCadastrar.get('ano')?.touched && formCadastrar.get('ano')?.hasError('max')">Insira um ano válido!</span>
    <ion-item>
      <ion-input label="Potência" placeholder="Insira a potência" formControlName="potencia" type="number"></ion-input>
    </ion-item>
    <span *ngIf="formCadastrar.get('potencia')?.touched && formCadastrar.get('potencia')?.errors?.['required']">Potência é Obrigatória!</span>
    <span *ngIf="formCadastrar.get('potencia')?.touched && formCadastrar.get('potencia')?.hasError('min')">Insira uma potência válida!</span>
    <span *ngIf="formCadastrar.get('potencia')?.touched && formCadastrar.get('potencia')?.hasError('max')">Insira uma potência válida!</span>
    <ion-item>
      <ion-select label="Portas" placeholder="Selecionar" formControlName="porta">
        <ion-select-option value="2">Duas portas</ion-select-option>
        <ion-select-option value="3">Três portas</ion-select-option>
        <ion-select-option value="4">Quatro portas</ion-select-option>
      </ion-select>
    </ion-item>
    <span *ngIf="formCadastrar.get('porta')?.touched && formCadastrar.get('porta')?.errors?.['required']">Porta é Obrigatória!</span>
    <ion-item>
      <ion-button size="default" color="success" shape="round">
        <input type="file" (change)="uploadFile($event.target)"/>
      </ion-button>
    </ion-item>
    </form>
    <ion-button expand="block" (click)="cadastrar()">Enviar</ion-button>
  </ion-list>
</ion-content>
